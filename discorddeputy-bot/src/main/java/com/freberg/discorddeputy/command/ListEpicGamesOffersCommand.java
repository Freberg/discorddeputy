package com.freberg.discorddeputy.command;import com.freberg.discorddeputy.api.EpicGamesOfferClient;import com.freberg.discorddeputy.reponse.DiscordResponseUtil;import discord4j.core.object.entity.Message;import lombok.RequiredArgsConstructor;import reactor.core.publisher.Flux;@RequiredArgsConstructorpublic class ListEpicGamesOffersCommand implements Command {    private static final String LIST_EPIC_GAMES_COMMAND = "!listEpicGamesOffers";    private final EpicGamesOfferClient epicGamesOfferClient;    @Override    public String getCommand() {        return LIST_EPIC_GAMES_COMMAND;    }    @Override    public void accept(Message message) {        epicGamesOfferClient.getAllCurrentOffers()                            .flatMapMany(Flux::fromIterable)                            .flatMap(offer -> message.getChannel().flatMap(channel -> channel.createEmbed(spec ->                                    DiscordResponseUtil.createEpicGamesOfferMessage(offer, spec, true))))                            .subscribe();    }}