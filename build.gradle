import org.openapitools.generator.gradle.plugin.tasks.GenerateTask

plugins {
	id 'io.spring.dependency-management' version '1.1.3'
	id "org.openapi.generator" version "7.0.1"
}

ext {
	springVersion = "3.1.4"
	springManagmentVersion = "1.1.3"
	springCloudVersion = "2022.0.4"
	springDocVersion = "1.7.0"
}

allprojects {
	apply plugin: 'java'
	apply plugin: 'maven-publish'
	apply plugin: 'io.spring.dependency-management'

	group = 'com.freberg'
	version = '0.0.1-SNAPSHOT'
	sourceCompatibility = '17'

	configurations {
		compileOnly {
			extendsFrom annotationProcessor
		}
	}

	repositories {
		mavenCentral()
		mavenLocal()
	}

	test {
		useJUnitPlatform()
	}

	dependencies {
		implementation 'javax.annotation:javax.annotation-api:1.3.2'
	}
}

task openApiGenerateEpicClient(type: GenerateTask) {
	generatorName = "java"
	inputSpec = "$rootDir/openApi/epic-api-docs.yaml".toString()
	outputDir = "$rootDir/discorddeputy-api-epic-client".toString()
	apiPackage = "com.freberg.discorddeputy.api"
	invokerPackage = "com.freberg.discorddeputy.invoker"
	modelPackage = "com.freberg.discorddeputy.model"
	groupId = "com.freberg"
	id = "discorddeputy-api-epic-client"
	version = "$rootProject.version"
	generateModelTests = false
	generateApiTests = false
	configOptions = [
			dateLibrary: "java8"
	]
}

task openApiGenerateSteamClient(type: GenerateTask) {
	generatorName = "java"
	inputSpec = "$rootDir/openApi/steam-api-docs.yaml".toString()
	outputDir = "$rootDir/discorddeputy-api-steam-client".toString()
	apiPackage = "com.freberg.discorddeputy.api"
	invokerPackage = "com.freberg.discorddeputy.invoker"
	modelPackage = "com.freberg.discorddeputy.model"
	groupId = "com.freberg"
	id = "discorddeputy-api-steam-client"
	version = "$rootProject.version"
	generateModelTests = false
	generateApiTests = false
	configOptions = [
			dateLibrary: "java8"
	]
}
