plugins {
	id 'io.spring.dependency-management' version '1.0.10.RELEASE'
	id "org.openapi.generator" version "4.3.1"
}

ext {
	springVersion = "2.3.4.RELEASE"
	springManagmentVersion = "1.0.10.RELEASE"
	springCloudVersion = "Hoxton.SR8"
	springDocVersion = "1.4.8"
}

allprojects {

	apply plugin: 'java'
	apply plugin: 'maven'
	apply plugin: 'jacoco'
	apply plugin: 'io.spring.dependency-management'

	group = 'com.freberg'
	version = '0.0.1-SNAPSHOT'
	sourceCompatibility = '15'

	jacoco {
		toolVersion = "0.8.6"
	}

	configurations {
		compileOnly {
			extendsFrom annotationProcessor
		}
	}

	repositories {
		mavenCentral()
	}

	test {
		useJUnitPlatform()
	}

	dependencies {
		implementation 'javax.annotation:javax.annotation-api:1.3.2'
	}
}

task openApiGenerateEpicClient(type: org.openapitools.generator.gradle.plugin.tasks.GenerateTask) {
	generatorName = "java"
	inputSpec = "$rootDir/openApi/epic-api-docs.yaml".toString()
	outputDir = "$rootDir/discorddeputy-api-epic-client".toString()
	apiPackage = "com.freberg.discorddeputy.api"
	invokerPackage = "com.freberg.discorddeputy.invoker"
	modelPackage = "com.freberg.discorddeputy.model"
	groupId = "$group"
	id = "api-epic-client"
	version = "$rootProject.version"
	generateModelTests = false
	generateApiTests = false
	configOptions = [
			dateLibrary: "java8"
	]
}

task openApiGenerateSteamClient(type: org.openapitools.generator.gradle.plugin.tasks.GenerateTask) {
	generatorName = "java"
	inputSpec = "$rootDir/openApi/steam-api-docs.yaml".toString()
	outputDir = "$rootDir/discorddeputy-api-steam-client".toString()
	apiPackage = "com.freberg.discorddeputy.api"
	invokerPackage = "com.freberg.discorddeputy.invoker"
	modelPackage = "com.freberg.discorddeputy.model"
	groupId = "$group"
	id = "api-steam-client"
	version = "$rootProject.version"
	generateModelTests = false
	generateApiTests = false
	configOptions = [
			dateLibrary: "java8"
	]
}
